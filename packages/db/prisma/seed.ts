import { Prisma } from "../generated/prisma/client";
import { prisma } from "../prisma";

const TOKEN_MINT = "CPnfFKjiyHdSVKGJvawzqE7Fn6cvNok9maBXYLUJHHZF";

const KLINE_DATA = [
  {
    timestamp: 1762992000000,
    open: "0.0000041148053345068727274545304",
    high: "0.0004397269939322433336095183029886590813316",
    low: "0.0000041148053345068727274545304",
    close: "0.0003442384353735210501919675096058572754266",
    volume: "1151023.98324855715507082100107",
  },
  {
    timestamp: 1763078400000,
    open: "0.0003442384353735210501919675096058572754266",
    high: "0.001014105580832843987139969718253262027957",
    low: "0.0001704829205075958633029583299754061945425",
    close: "0.0001940490923220861231577714490604557750058",
    volume: "2923460.49161251179849238950902",
  },
  {
    timestamp: 1763164800000,
    open: "0.0001940490923220861231577714490604557750058",
    high: "0.0002750254554671643787395677377378091944565",
    low: "0.00006357911327054174750598467351999787147131",
    close: "0.00009464241145807041798926459182852256486728",
    volume: "517424.72873081312053682118132",
  },
  {
    timestamp: 1763251200000,
    open: "0.00009464241145807041798926459182852256486728",
    high: "0.0002974001026601613707288111761739727658173",
    low: "0.00006709820950921346488934904680837998069955",
    close: "0.0001713606071731482648948202027253808831841",
    volume: "468409.31549439932768313451881",
  },
  {
    timestamp: 1763337600000,
    open: "0.0001713606071731482648948202027253808831841",
    high: "0.000247391058743499341761892887279774761681",
    low: "0.00009340691958912111244291356902765362610114",
    close: "0.0001266363889581090201602441024456941668206",
    volume: "188944.58736516717857860086596",
  },
  {
    timestamp: 1763424000000,
    open: "0.0001266363889581090201602441024456941668206",
    high: "0.0001831857720185654517360564844920166150916",
    low: "0.00008600457859863062801110038813712916482674",
    close: "0.0001063411941941081480909312808985092757826",
    volume: "123606.47915884608917292573674",
  },
  {
    timestamp: 1763510400000,
    open: "0.0001063411941941081480909312808985092757826",
    high: "0.0001164068976787068551529439655685486343118",
    low: "0.00005086681523704495356470360126496835989533",
    close: "0.00005841922218305137069763938257484574505124",
    volume: "82495.74244977296611971133765",
  },
  {
    timestamp: 1763596800000,
    open: "0.00005841922218305137069763938257484574505124",
    high: "0.0001235374411246685063009131631222836341279",
    low: "0.00005841922218305137069763938257484574505124",
    close: "0.00008836743646279029383667352764295558635852",
    volume: "60308.32053079561373151355259",
  },
  {
    timestamp: 1763683200000,
    open: "0.00008836743646279029383667352764295558635852",
    high: "0.0002084324997454175572736054052601920806133",
    low: "0.00006288739266833164186228800447676692678129",
    close: "0.0001233323428601807707744992710354931499848",
    volume: "156648.89746649304526313975721",
  },
  {
    timestamp: 1763769600000,
    open: "0.0001233323428601807707744992710354931499848",
    high: "0.0001907465190594105157489749975631699890494",
    low: "0.00009211346939053235613395707916771767623838",
    close: "0.0001853594298919563360539641509893662227496",
    volume: "51654.79034666668164700901507",
  },
  {
    timestamp: 1763856000000,
    open: "0.0001853594298919563360539641509893662227496",
    high: "0.0001853594298919563360539641509893662227496",
    low: "0.0001266035700226294825310986225352720737317",
    close: "0.0001372136955684250045846534224597534792541",
    volume: "29945.44266683922614863931393",
  },
  {
    timestamp: 1763942400000,
    open: "0.0001372136955684250045846534224597534792541",
    high: "0.0001372136955684250045846534224597534792541",
    low: "0.00006222874003452056642996101620567426122759",
    close: "0.00008038803904718416130809399249870983581664",
    volume: "35821.75034485422431192014275",
  },
  {
    timestamp: 1764028800000,
    open: "0.00008038803904718416130809399249870983581664",
    high: "0.000101087765113611630373863721078695452452",
    low: "0.00005876488588058703064834378169762824560069",
    close: "0.00006431879208230353264990501496001303458629",
    volume: "31597.93915554391045718338960",
  },
  {
    timestamp: 1764115200000,
    open: "0.00006431879208230353264990501496001303458629",
    high: "0.0001511908587494586719240539837795628656304",
    low: "0.00006431879208230353264990501496001303458629",
    close: "0.00009679553847832208376794819382074485826831",
    volume: "89796.62637835105214715395701",
  },
  {
    timestamp: 1764201600000,
    open: "0.00009679553847832208376794819382074485826831",
    high: "0.0001137208130309117741765332556392479695025",
    low: "0.00006993008939825137247051298901702231788781",
    close: "0.0001129047860239043318353837466331634177361",
    volume: "26377.33225100464401060347064",
  },
  {
    timestamp: 1764288000000,
    open: "0.0001129047860239043318353837466331634177361",
    high: "0.0001581207370045030989376646406609328375553",
    low: "0.00008402654304349706042154797995907045577381",
    close: "0.0001013360554591753806510375626709350080732",
    volume: "54012.84787499420293304313290",
  },
  {
    timestamp: 1764374400000,
    open: "0.0001013360554591753806510375626709350080732",
    high: "0.0002818304063837960682192232048973501060085",
    low: "0.00008152884538326811807016421787738870444878",
    close: "0.0001586896201280978517469968469675612235489",
    volume: "209211.05934776482253370098955",
  },
  {
    timestamp: 1764460800000,
    open: "0.0001586896201280978517469968469675612235489",
    high: "0.0002344953531571561132734342533448755831082",
    low: "0.0001150695982380134010803139310789326115729",
    close: "0.000115674505633737657350374313228632635219",
    volume: "81717.70940947710762630809585",
  },
  {
    timestamp: 1764547200000,
    open: "0.000115674505633737657350374313228632635219",
    high: "0.0003027506829726193525031279326651035896436",
    low: "0.000115674505633737657350374313228632635219",
    close: "0.0001567538004109162914278245672888976027578",
    volume: "120366.38977899206052119908893",
  },
  {
    timestamp: 1764633600000,
    open: "0.0001567538004109162914278245672888976027578",
    high: "0.0001875988275590966722626757586096544001568",
    low: "0.0001167713686844263742993108951911930420296",
    close: "0.0001317809252201015636662061329716742148424",
    volume: "71067.33570709696657864284513",
  },
  {
    timestamp: 1764720000000,
    open: "0.0001317809252201015636662061329716742148424",
    high: "0.0001510134700232689279051163848447373112668",
    low: "0.00009942264603454719360131844336269252700227",
    close: "0.0001170058733736620747178982059806110018374",
    volume: "47142.02398362898174350090274",
  },
  {
    timestamp: 1764806400000,
    open: "0.0001170058733736620747178982059806110018374",
    high: "0.0001534277829245772326821274157820861011365",
    low: "0.000107723627010392519064794796927085594049",
    close: "0.0001319112349337127792727663272617392552882",
    volume: "33512.48443971376103058192059",
  },
  {
    timestamp: 1764892800000,
    open: "0.0001319112349337127792727663272617392552882",
    high: "0.0001320552915991754535382399252944522784115",
    low: "0.00009672661134719485568062678639675757735092",
    close: "0.0001019632415272105342187874902545896409541",
    volume: "33578.04176808005804646546294",
  },
  {
    timestamp: 1764979200000,
    open: "0.0001019632415272105342187874902545896409541",
    high: "0.000109482912913376653845349517766646182936",
    low: "0.00007549424202473809219990723538232887511522",
    close: "0.00008225444817371968664407964608131581719745",
    volume: "23829.69090022231363367422423",
  },
  {
    timestamp: 1765065600000,
    open: "0.00008225444817371968664407964608131581719745",
    high: "0.00009756227116164826706807446390137808204182",
    low: "0.00005983830039124479407841196836972540931979",
    close: "0.00008558503778796250644312685088415954114714",
    volume: "34912.64945423368913933060095",
  },
  {
    timestamp: 1765152000000,
    open: "0.00008558503778796250644312685088415954114714",
    high: "0.00008676171532223444792241798362360091546458",
    low: "0.0000606453737579754889355001633228841731045",
    close: "0.00006128054207873006773354449394957500206787",
    volume: "21472.43191804007437995996116",
  },
  {
    timestamp: 1765238400000,
    open: "0.00006128054207873006773354449394957500206787",
    high: "0.00006668579190578307131747302153376287375867",
    low: "0.00004560067634840045516951501085448121685734",
    close: "0.00004706199190806627687196474035736579113328",
    volume: "11568.79607687292855177994444",
  },
  {
    timestamp: 1765324800000,
    open: "0.00004706199190806627687196474035736579113328",
    high: "0.00005525988606395843251973787253369916244008",
    low: "0.00004435601895590561363640787739418858482721",
    close: "0.00005088394085069407928749102963519685504575",
    volume: "7266.27610729567509981044074",
  },
  {
    timestamp: 1765411200000,
    open: "0.00005088394085069407928749102963519685504575",
    high: "0.00006298444139145851505425548903915288212253",
    low: "0.00004343539882286862713566543992409169520375",
    close: "0.00004511788358913985479263152577003809736785",
    volume: "18100.81963238645775147444453",
  },
  {
    timestamp: 1765497600000,
    open: "0.00004511788358913985479263152577003809736785",
    high: "0.00004832762175819204319612302215877435248479",
    low: "0.00004067211982599774073489504094831043005705",
    close: "0.00004564592421633935540771975141669621869465",
    volume: "6402.42245776602072321374102",
  },
  {
    timestamp: 1765584000000,
    open: "0.00004564592421633935540771975141669621869465",
    high: "0.00004976264857986506220782637443535949627681",
    low: "0.00003529896504101678049656134115728183946745",
    close: "0.00003850239438491837015095663175875223587672",
    volume: "7064.84698832614777660492705",
  },
  {
    timestamp: 1765670400000,
    open: "0.00003850239438491837015095663175875223587672",
    high: "0.0000463827179328980423592476794568095862922",
    low: "0.00003459348866392343314506767624822050142546",
    close: "0.00004438622935689497953972144460196617730426",
    volume: "5746.07922649628729040936218",
  },
  {
    timestamp: 1765756800000,
    open: "0.00004438622935689497953972144460196617730426",
    high: "0.00005044302359797632995917027253966171594224",
    low: "0.00003804835981089695954593530315237944586116",
    close: "0.00004708736339385413456078357568481781430852",
    volume: "6592.00991080966065010154806",
  },
];

async function main() {
  console.log("ðŸŒ± Seeding real kline data...");

  const rows: Prisma.klineCreateManyInput[] = KLINE_DATA.map((k) => ({
    tokenMintAddress: TOKEN_MINT,
    timestamp: new Date(k.timestamp), // ms â†’ Date
    open: new Prisma.Decimal(k.open),
    high: new Prisma.Decimal(k.high),
    low: new Prisma.Decimal(k.low),
    close: new Prisma.Decimal(k.close),
    volume: new Prisma.Decimal(k.volume),
    trades: 0, // unknown from dataset
  }));

  await prisma.kline.createMany({
    data: rows,
    skipDuplicates: true, // ðŸ‘ˆ critical
  });

  console.log(`âœ… Seeded ${rows.length} klines`);
}

main()
  .catch((e) => {
    console.error("âŒ Seed failed:", e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
